<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
        动态加载列表
    </title>

         
    <link href="../../Content/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" />
        
    <script src="../../Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>        
</head>

<body>




<!-- data-role = page  用于定义  一个页面.  -->
<div data-role="page">


    <!--  data-role = header  用于定义一个 顶部标题.  -->
    <div data-role="header">
	    <h1> 动态加载列表  </h1>
        <a href="/html5/home.html" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
    </div>  <!-- /header -->





    <!--  data-role = content  用于定义一个 中间内容区域.  -->
    <div data-role="content">


        <h2> 动态加载列表 </h2>

        <p> 
          动态加载列表的情况下， 需要在数据加载完毕以后， 再调用一个   
          <code> $('#').listview('refresh'); </code> 的方法。
          以刷新画面显示.
        </p>


        <input type="button" id="callAjax" value="动态加载" />


        <p> 未调用 listview('refresh') 的 </p>
	    <div class="content-primary">
	        <ul id="testList1"  data-role="listview">
	        </ul>
	    </div><!--/content-primary -->


        <p> 调用 listview('refresh') 的 </p>
        <div class="content-primary">
	        <ul id="testList2"  data-role="listview">
	        </ul>
	    </div><!--/content-primary -->

    </div> <!-- /content -->





    <!--  data-role = footer  用于定义一个 底部标题.  -->
	<div data-role="footer" data-id="foo1" data-position="fixed">
        <h3>
            Footer
        </h3>
	</div><!-- /footer -->

</div><!-- /page -->






<script type="text/javascript">


    $(document).ready(function () {

        $("#callAjax").bind("click", function (event, ui) {

            $("li.UserData").remove();

            // 这里主要是为了模拟动态加载， 就不去 ajax 了， 简单 for 循环一下.
            for (var i = 0; i < 5; i++) {
                $("#testList1").append("<li class='UserData'><a href='#'> Test" + i + "</a></li>");
                $("#testList2").append("<li class='UserData'><a href='#'> Test" + i + "</a></li>");
            }

            // 对比 listview('refresh') 的调用与否.
            $('#testList2').listview('refresh');

        });
    });


</script>



</body>
</html>

